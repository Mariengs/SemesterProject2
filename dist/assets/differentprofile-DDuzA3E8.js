import{t as f,u as g,A as x}from"./navbar-CV3-IAa4.js";import{s as b,a as C,f as v}from"./logout-DI3KsR8W.js";document.addEventListener("DOMContentLoaded",()=>{f(),g(),b(),C(),w(),v()});async function w(){const e=document.getElementById("profileContainer"),t=localStorage.getItem("accessToken"),n=new URLSearchParams(window.location.search).get("name"),r=x;if(!t||!n){h(e,"You must be logged in to view this profile.");return}try{const i=await y(n,t,r);E(e,i);const a=N(e,"userListings");await L(n,t,r,a)}catch(i){h(e,`Could not load profile: ${i.message}`)}}async function y(e,t,o){const n=await fetch(`https://v2.api.noroff.dev/auction/profiles/${e}`,{headers:{Authorization:`Bearer ${t}`,"X-Noroff-API-Key":o}});if(!n.ok)throw new Error("Failed to fetch profile information.");const{data:r}=await n.json();return r}function E(e,t){var r,i,a,l;e.innerHTML="";const o=((r=t.banner)==null?void 0:r.url)||"https://via.placeholder.com/800x200",n=((i=t.avatar)==null?void 0:i.url)||"https://via.placeholder.com/100";e.appendChild(c(o,((a=t.banner)==null?void 0:a.alt)||"Banner","w-full h-48 object-cover rounded-lg mb-4")),e.appendChild(c(n,((l=t.avatar)==null?void 0:l.alt)||"Avatar","w-24 h-24 rounded-full mx-auto border-4 border-gray-700 -mt-16 bg-gray-900 object-cover")),e.appendChild(s("h1",t.name,"text-2xl font-bold mt-4 text-center")),e.appendChild(s("p",t.email,"text-gray-400 text-center")),e.appendChild(s("p",t.bio||"No bio available.","text-gray-400 text-center")),e.appendChild(s("p",`Credits: ${t.credits}`,"text-lg font-semibold text-green-400 text-center mt-2"))}async function L(e,t,o,n){try{const r=await fetch(`https://v2.api.noroff.dev/auction/profiles/${e}/listings`,{headers:{Authorization:`Bearer ${t}`,"X-Noroff-API-Key":o}});if(!r.ok)throw new Error("Failed to fetch listings.");const{data:i}=await r.json();if(n.appendChild(s("h2","Listings","text-xl font-bold text-center")),i.length===0){n.appendChild(s("p","This user has no listings.","text-gray-500 text-center"));return}i.forEach(a=>{var p,m;const l=document.createElement("div");l.className="bg-gray-800 p-4 rounded-lg shadow-md mb-6",l.appendChild(s("h3",a.title,"text-lg font-semibold text-white"));const u=((m=(p=a.media)==null?void 0:p[0])==null?void 0:m.url)||"https://via.placeholder.com/400x300";l.appendChild(c(u,a.title,"w-full h-48 object-cover rounded-lg mb-4")),l.appendChild(s("p",a.description||"No description provided.","text-gray-400"));const d=document.createElement("a");d.href=`/html/single-listing.html?id=${a.id}`,d.textContent="View Listing",d.className="text-blue-500 hover:underline mt-4 inline-block",l.appendChild(d),n.appendChild(l)})}catch(r){n.appendChild(s("p",`Error loading listings: ${r.message}`,"text-red-500"))}}function c(e,t,o){const n=document.createElement("img");return n.src=e,n.alt=t,n.className=o,n}function s(e,t,o){const n=document.createElement(e);return n.textContent=t,n.className=o,n}function h(e,t){e.innerHTML="";const o=document.createElement("p");o.textContent=t,o.className="text-red-500",e.appendChild(o)}function N(e,t){const o=document.createElement("div");return o.id=t,o.className="mt-8",e.appendChild(o),o}
