import{t as c,L as m,A as d}from"./navbar-CV3-IAa4.js";import{u as g}from"./authHelpers-DyxOVpWD.js";document.addEventListener("DOMContentLoaded",function(){c(),g()});const u=document.getElementById("loginForm");u.addEventListener("submit",async s=>{var n,a;s.preventDefault();const o=document.getElementById("loginEmail").value,i=document.getElementById("loginPassword").value;if(!o.endsWith("@stud.noroff.no")){alert("You must have @stud.noroff.no e-mail address to log in.");return}try{const e=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:i})}),r=await e.json();if(e.ok){const{accessToken:l,...t}=r.data;localStorage.setItem("accessToken",l),localStorage.setItem("profile",JSON.stringify(t)),localStorage.setItem("userName",t.name),localStorage.setItem("credits",t.credits),localStorage.setItem("apiKey",d),alert(`Welcome, ${t.name}!`),window.location.href="/"}else alert(((a=(n=r.errors)==null?void 0:n[0])==null?void 0:a.message)||"Login failed.")}catch(e){console.error("Error logging in:",e),alert("Something went wrong.")}});
