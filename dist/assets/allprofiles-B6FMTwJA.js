import{t as m,u as p,A as f}from"./navbar-VXXSY6lC.js";import{s as h,a as g,f as b}from"./logout-CgsMzti0.js";document.addEventListener("DOMContentLoaded",function(){m(),p(),h(),g();const r=localStorage.getItem("accessToken"),a=document.getElementById("auth-message"),n=document.getElementById("profiles-container");if(!r){a&&a.classList.remove("hidden"),n&&n.classList.add("hidden");return}v(),E();const t=document.getElementById("search-input");t.addEventListener("input",function(){const e=t.value.trim();d(e)}),d(),b()});function v(){const r=document.getElementById("profiles-wrapper");if(!r)return;const a=document.createElement("div");a.className="mb-6 max-w-md mx-auto relative";const n=document.createElement("label");n.setAttribute("for","search-input"),n.className="sr-only",n.textContent="Search by username";const t=document.createElement("span");t.textContent="🔍",t.className="absolute left-3 top-3 text-gray-400 pointer-events-none";const e=document.createElement("button");e.textContent="✖️",e.className="absolute right-3 top-2.5 text-gray-400 hover:text-white hidden",e.setAttribute("type","button");const o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","search-input"),o.setAttribute("placeholder","Search by username..."),o.className="p-3 pl-10 pr-10 w-full rounded-md bg-gray-800 text-white placeholder-gray-400 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-150",e.addEventListener("click",()=>{o.value="",e.classList.add("hidden"),d()}),o.addEventListener("input",()=>{o.value.trim().length>0?e.classList.remove("hidden"):e.classList.add("hidden")}),a.appendChild(n),a.appendChild(t),a.appendChild(e),a.appendChild(o),r.insertBefore(a,r.firstChild)}function E(){document.getElementById("profiles-container").classList.add("grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6","p-4")}async function d(r=""){const a=localStorage.getItem("accessToken");if(!a)throw new Error("Token not found. Please log in.");let n="https://v2.api.noroff.dev/auction/profiles";r&&(n=`https://v2.api.noroff.dev/auction/profiles/search?q=${r}`);const t=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${a}`,"X-Noroff-API-Key":f}});if(!t.ok)throw new Error(`API Error: ${t.status} - ${t.statusText}`);const e=await t.json();if(!e||!e.data)throw new Error("No profiles found");w(e.data)}function w(r){const a=document.getElementById("profiles-container");a.innerHTML="",r.forEach(n=>{var c,l;const t=document.createElement("div");t.classList.add("bg-gray-800","p-6","rounded-lg","shadow-md","hover:shadow-xl","transition","duration-300","ease-in-out","cursor-pointer");const e=document.createElement("img");e.src=((c=n.avatar)==null?void 0:c.url)||"default-avatar.jpg",e.alt=((l=n.avatar)==null?void 0:l.alt)||"Avatar",e.classList.add("w-24","h-24","rounded-full","mb-4","object-cover");const o=document.createElement("h2");o.classList.add("text-xl","font-semibold","text-white","mb-2"),o.textContent=n.name;const i=document.createElement("p");i.classList.add("text-gray-400","mb-4"),i.textContent=n.bio||"No bio available";const s=document.createElement("button");s.type="button",s.textContent="View Profile",s.className="btn-view-profile",s.setAttribute("aria-label","View Profile"),s.addEventListener("click",u=>{u.preventDefault(),window.location.href=`/html/different-profile.html?name=${n.name}`}),t.appendChild(e),t.appendChild(o),t.appendChild(i),t.appendChild(s),a.appendChild(t)})}
