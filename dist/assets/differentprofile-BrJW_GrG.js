import{t as x,u as b,A as v}from"./navbar-B4jypeQx.js";import{s as C,a as w,f as y}from"./logout-SE-Pe0Xt.js";document.addEventListener("DOMContentLoaded",()=>{x(),b(),C(),w(),E(),y()});async function E(){const e=document.getElementById("profileContainer"),t=localStorage.getItem("accessToken"),n=new URLSearchParams(window.location.search).get("name"),r=v;if(!t||!n){f(e,"You must be logged in to view this profile.");return}try{const a=await L(n,t,r);N(e,a);const l=P(e,"userListings");await A(n,t,r,l)}catch(a){f(e,`Could not load profile: ${a.message}`)}}async function L(e,t,o){const n=await fetch(`https://v2.api.noroff.dev/auction/profiles/${e}`,{headers:{Authorization:`Bearer ${t}`,"X-Noroff-API-Key":o}});if(!n.ok)throw new Error("Failed to fetch profile information.");const{data:r}=await n.json();return r}function N(e,t){var r,a,l,s;e.innerHTML="";const o=((r=t.banner)==null?void 0:r.url)||"https://via.placeholder.com/1200x300",n=((a=t.avatar)==null?void 0:a.url)||"https://via.placeholder.com/100";e.appendChild(m(o,((l=t.banner)==null?void 0:l.alt)||"Banner","w-full h-64 object-cover rounded-lg mb-4")),e.appendChild(m(n,((s=t.avatar)==null?void 0:s.alt)||"Avatar","w-24 h-24 rounded-full mx-auto border-4 border-gray-700 -mt-16 bg-gray-900 object-cover")),e.appendChild(i("h1",t.name,"text-2xl font-bold mt-4 text-center")),e.appendChild(i("p",t.email,"text-gray-400 text-center")),e.appendChild(i("p",t.bio||"No bio available.","text-gray-400 text-center"))}async function A(e,t,o,n){try{const r=await fetch(`https://v2.api.noroff.dev/auction/profiles/${e}/listings`,{headers:{Authorization:`Bearer ${t}`,"X-Noroff-API-Key":o}});if(!r.ok)throw new Error("Failed to fetch listings.");const{data:a}=await r.json(),l=i("h2","Listings","text-xl font-bold text-center mb-4 col-span-full");if(n.appendChild(l),a.length===0){n.appendChild(i("p","This user has no listings.","text-gray-500 text-center col-span-full"));return}const s=document.createElement("div");s.className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",n.appendChild(s),a.forEach(d=>{var h,u;const c=document.createElement("div");c.className="bg-gray-800 p-4 rounded-lg shadow-md",c.appendChild(i("h3",d.title,"text-lg font-semibold text-white mb-2"));const g=((u=(h=d.media)==null?void 0:h[0])==null?void 0:u.url)||"https://via.placeholder.com/400x300";c.appendChild(m(g,d.title,"w-full h-40 object-cover rounded-lg mb-4")),c.appendChild(i("p",d.description||"No description provided.","text-gray-400 mb-4"));const p=document.createElement("a");p.href=`/html/single-listing.html?id=${d.id}`,p.textContent="View Listing",p.className="btn-view-listing mx-auto",c.appendChild(p),s.appendChild(c)})}catch(r){n.appendChild(i("p",`Error loading listings: ${r.message}`,"text-red-500 text-center col-span-full"))}}function m(e,t,o){const n=document.createElement("img");return n.src=e,n.alt=t,n.className=o,n}function i(e,t,o){const n=document.createElement(e);return n.textContent=t,n.className=o,n}function f(e,t){e.innerHTML="";const o=document.createElement("p");o.textContent=t,o.className="text-red-500 text-center",e.appendChild(o)}function P(e,t){const o=document.createElement("div");return o.id=t,o.className="mt-8 grid grid-cols-1 gap-6",e.appendChild(o),o}
